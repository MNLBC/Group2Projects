{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "RegisterController",
        "id": "register"
    },
    "name": "MyController",
    "designerId": "78778f28-431b-4b1c-b6b8-5cd5e249895c",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#RegBtn",
                "designer|targetType": "MyButton12",
                "fn": "onRegBtnClick",
                "implHandler": [
                    "Ext.MessageBox.show({",
                    "    title: 'Please wait',",
                    "    msg: 'Register new account',",
                    "    progressText: 'Creating your new account',",
                    "    width:300,",
                    "    progress:true,",
                    "    closable:false,",
                    "    animateTarget: 'RegBtn'",
                    "});",
                    "",
                    "Ext.MessageBox.hide();",
                    "Ext.Msg.show({",
                    "    title:'Status',",
                    "    msg: 'You have registered successfully.',",
                    "    buttons: Ext.Msg.OK,",
                    "    icon: Ext.Msg.Info,",
                    "    fn: function(btn){",
                    "        if (btn === 'ok') {",
                    "",
                    "            var store = Ext.StoreManager.get('UserStore');",
                    "            var maxId;",
                    "",
                    "            //ADD TO STORE",
                    "            if (store.getCount() > 0)",
                    "            {",
                    "                maxId = store.getAt(0).get('id'); // initialise to the first record's id value.",
                    "                store.each(function(rec) // go through all the records",
                    "                           {",
                    "                               maxId = Math.max(maxId, rec.get('id'));",
                    "                           });",
                    "            }",
                    "",
                    "            var id = maxId + 1;",
                    "            var fname = Ext.getCmp('RegFname').getValue();",
                    "            var lname = Ext.getCmp('RegLname').getValue();",
                    "            var address = Ext.getCmp('RegAddress').getValue();",
                    "            var email = Ext.getCmp('RegEmail').getValue();",
                    "            var username=Ext.getCmp('RegUsername').getValue();",
                    "            var password = Ext.getCmp('RegPassword').getValue();",
                    "",
                    "            var Object =  {\"id\" :id,",
                    "                           \"fname\": fname,",
                    "                           \"lname\": lname,",
                    "                           \"email\": address,",
                    "                           \"username\": email,",
                    "                           \"password\": username,",
                    "                           \"address\": password",
                    "",
                    "                          };",
                    "",
                    "",
                    "",
                    "            store.add(Object);",
                    "",
                    "",
                    "",
                    "            if(Ext.isEmpty(this.loginWin)){",
                    "                this.loginWin = Ext.create('W3D5_Project.view.LoginViewport', {});",
                    "            }",
                    "            this.loginWin.show();",
                    "            this.loginWin.unmask();",
                    "                 if(Ext.isEmpty(this.mainWin)){",
                    "         this.mainWin.hide();",
                    "         this.mainWin.mask();",
                    "     }",
                    "    if(Ext.isEmpty(this.registerWin)){",
                    "         this.registerWin.hide();",
                    "         this.registerWin.mask();",
                    "     }",
                    "        }",
                    "    }",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onRegBtnClick",
            "designerId": "c25fe52c-4335-4364-8dfd-94efced2b234"
        }
    ]
}