{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ManageUser",
        "id": "ManageUser"
    },
    "name": "MyController",
    "designerId": "9b20a8ab-e45e-40db-8c79-a22b26d80c7e",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserCreate",
                "designer|targetType": "MyButton7",
                "fn": "onUserCreateClick",
                "implHandler": [
                    "var controller = W3D5_Project.app.getController('ManageUser');",
                    "var store = Ext.getStore('UserStore');",
                    "var user = controller.getUserFormValues();",
                    "store.add(user);",
                    "controller.resetFormValues();"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserCreateClick",
            "designerId": "b315c398-7c19-4106-9a55-0ed496a565d5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserUpdate",
                "designer|targetType": "MyButton9",
                "fn": "onUserUpdateClick",
                "implHandler": [
                    "var controller = W3D5_Project.app.getController('ManageUser');",
                    "var store = Ext.getStore('UserStore');",
                    "var user = controller.getUserFormValues();",
                    "var id = Ext.getCmp('id').getValue();",
                    "var grid = Ext.getCmp('userinfogrid');",
                    "",
                    "if(Ext.isEmpty(id)){",
                    "    Ext.Msg.show({",
                    "    title:'Status',",
                    "    msg: 'Please select a record to update.',",
                    "    buttons: Ext.Msg.OK,",
                    "    icon: Ext.Msg.WARNING",
                    "});",
                    "}else{",
                    "   Ext.each(store.data.items, function(rec){",
                    "    if(rec.data.id == id){",
                    "        rec.data.fname = user.fname;",
                    "        rec.data.lname = user.lname;",
                    "        rec.data.email = user.email;",
                    "        rec.data.address = user.address;",
                    "        rec.data.username = user.username;",
                    "        rec.data.password = user.password;",
                    "    }",
                    "});",
                    "}",
                    "",
                    "grid.getView().refresh();",
                    "controller.UserResetFormValues();"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserUpdateClick",
            "designerId": "1eceff18-c4b9-4199-a755-0607bead3bc4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserDelete",
                "designer|targetType": "MyButton10",
                "fn": "onUserDeleteClick",
                "implHandler": [
                    "        var controller = W3D5_Project.app.getController('ManageUser');",
                    "        var store = Ext.getStore('UserStore');",
                    "        var id = Ext.getCmp('id').getValue();",
                    "",
                    "        if(Ext.isEmpty(id)){",
                    "            Ext.Msg.show({",
                    "            title:'',",
                    "            msg: 'Please select a record to delete.',",
                    "            buttons: Ext.Msg.OK,",
                    "            icon: Ext.Msg.WARNING",
                    "        });",
                    "        }else{",
                    "           Ext.each(store.data.items, function(rec){",
                    "            if(rec.data.id == id){",
                    "                controller.UserResetFormValues();",
                    "                store.remove(rec);",
                    "            }",
                    "          });",
                    "        }"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserDeleteClick",
            "designerId": "85f6e869-359c-4be2-8f3b-7f02e3b3df0a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserResetForm",
                "designer|targetType": "MyButton11",
                "fn": "onUserResetFormClick",
                "implHandler": [
                    "var controller = W3D5_Project.app.getController('ManageUser');",
                    "controller.UserResetFormValues();"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserResetFormClick",
            "designerId": "a3f75a8f-d86f-4362-bb1b-68c502749134"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserSearch",
                "designer|targetType": "MyButton6",
                "fn": "onUserSearchClick",
                "implHandler": [
                    "var searchVal = Ext.getCmp('UserSearchBar').getValue();",
                    " var store = Ext.getStore('UserStore');",
                    "if(Ext.isEmpty(searchVal)){",
                    "    store.clearFilter();",
                    "}else{",
                    "    store.filter('fname', searchVal);",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserSearchClick",
            "designerId": "f7f18d4f-bb6c-4cdf-a3b4-aefe530173fb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#UserResetSearch",
                "designer|targetType": "MyButton6",
                "fn": "onUserResetSearchClick",
                "implHandler": [
                    "Ext.getCmp('UserSearchBar').setValue('');",
                    "var store = Ext.getStore('UserStore');",
                    "store.clearFilter();"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onUserResetSearchClick",
            "designerId": "c137b942-1982-4b2a-a6a4-8b8bcc6861a8"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getUserFormValues",
                "implHandler": [
                    "var store = Ext.getStore('UserStore');",
                    "var fname = Ext.getCmp('fname').getValue();",
                    "var lname = Ext.getCmp('lname').getValue();",
                    "var email = Ext.getCmp('email').getValue();",
                    "var address = Ext.getCmp('address').getValue();",
                    "var username = Ext.getCmp('username').getValue();",
                    "var password = Ext.getCmp('password').getValue();",
                    "",
                    "",
                    "if (store.getCount() > 0)",
                    "{",
                    "    var maxId = store.getAt(0).get('id'); // initialise to the first record's id value.",
                    "    store.each(function(rec) // go through all the records",
                    "               {",
                    "                   maxId = Math.max(maxId, rec.get('id'));",
                    "               });",
                    "}",
                    "",
                    "id = maxId + 1;",
                    "",
                    "",
                    "var user = {",
                    "    \"id\":id,",
                    "    \"fname\":fname,",
                    "    \"lname\":lname,",
                    "    \"email\":email,",
                    "    \"address\":address,",
                    "    \"username\":username,",
                    "    \"password\":password",
                    "};",
                    "",
                    "return user;",
                    ""
                ]
            },
            "name": "getUserFormValues",
            "designerId": "b4631813-4305-4f91-aa8f-2cee8f1afcc0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "user"
                ],
                "fn": "setUserFormValues",
                "implHandler": [
                    "Ext.getCmp('id').setValue(user.id);",
                    "Ext.getCmp('fname').setValue(user.fname);",
                    "Ext.getCmp('lname').setValue(user.lname);",
                    "Ext.getCmp('email').setValue(user.email);",
                    "Ext.getCmp('username').setValue(user.username);",
                    "Ext.getCmp('password').setValue(user.password);",
                    "Ext.getCmp('address').setValue(user.address);",
                    "",
                    ""
                ]
            },
            "name": "setUserFormValues",
            "designerId": "2a50b8d1-0b54-40cd-99f2-ac7d05f59f09"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "UserResetFormValues",
                "implHandler": [
                    "Ext.getCmp('id').setValue('');",
                    "Ext.getCmp('fname').setValue('');",
                    "Ext.getCmp('lname').setValue('');",
                    "Ext.getCmp('email').setValue('');",
                    "Ext.getCmp('username').setValue('');",
                    "Ext.getCmp('password').setValue('');",
                    "Ext.getCmp('address').setValue('');",
                    "",
                    ""
                ]
            },
            "name": "UserResetFormValues",
            "designerId": "b9d20ba0-02db-473b-b7ee-ca91d90540d9"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#userinfogrid",
                "designer|targetType": "MyGridPanel1",
                "fn": "onUserinfogridSelectionChange",
                "implHandler": [
                    "var controller = W3D5_Project.app.getController('ManageUser');",
                    "var grid = Ext.getCmp('userinfogrid');",
                    "var selected = grid.getSelectionModel().selected.items[0].data;",
                    "controller.setUserFormValues(selected);"
                ],
                "name": "selectionchange",
                "scope": "me"
            },
            "name": "onUserinfogridSelectionChange",
            "designerId": "15cdbbb0-4f0d-4811-9314-3bb0cd11ba9a"
        }
    ]
}