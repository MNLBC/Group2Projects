{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Register",
        "id": "register"
    },
    "name": "MyController",
    "designerId": "58089c53-7c2e-419c-81f4-2d28d7cda6a6",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#regbtn",
                "designer|targetType": "MyButton12",
                "fn": "onRegButtonClick",
                "implHandler": [
                    "Ext.MessageBox.show({",
                    "    title: 'Please wait',",
                    "    msg: 'Register new account',",
                    "    progressText: 'Creating your new account',",
                    "    width:300,",
                    "    progress:true,",
                    "    closable:false,",
                    "    animateTarget: 'regbtn'",
                    "});",
                    "",
                    "// this hideous block creates the bogus progress",
                    "var f = function(v){",
                    "    return function(){",
                    "        if(v == 12){",
                    "            Ext.MessageBox.hide();",
                    "            Ext.Msg.show({",
                    "                title:'Status',",
                    "                msg: 'You have registered successfully.',",
                    "                buttons: Ext.Msg.OK,",
                    "                icon: Ext.Msg.Info,",
                    "                fn: function(btn){",
                    "                    if (btn === 'ok') {",
                    "",
                    "                        var store = Ext.StoreManager.get('UserStore');",
                    "                        var maxId;",
                    "",
                    "                        //ADD TO STORE",
                    "                        if (store.getCount() > 0)",
                    "                        {",
                    "                            maxId = store.getAt(0).get('id'); // initialise to the first record's id value.",
                    "                            store.each(function(rec) // go through all the records",
                    "                               {",
                    "                                   maxId = Math.max(maxId, rec.get('id'));",
                    "                               });",
                    "                        }",
                    "",
                    "                        var id = maxId + 1;",
                    "                        var fname = Ext.getCmp('regfname').getValue();",
                    "                        var lname = Ext.getCmp('reglname').getValue();",
                    "                        var address = Ext.getCmp('regaddress').getValue();",
                    "                        var email = Ext.getCmp('regemail').getValue();",
                    "                        var username=Ext.getCmp('regusername').getValue();",
                    "                        var password = Ext.getCmp('regpassword').getValue();",
                    "",
                    "                        var Object =  {\"id\" :id,",
                    "                                       \"fname\": fname,",
                    "                                       \"lname\": lname,",
                    "                                       \"email\": address,",
                    "                                       \"username\": email,",
                    "                                       \"password\": username,",
                    "                                       \"address\": password",
                    "",
                    "                                      };",
                    "",
                    "",
                    "",
                    "                        store.add(Object);",
                    "",
                    "",
                    "",
                    "                        if(Ext.isEmpty(this.loginWindow)){",
                    "                            this.loginWindow = Ext.create('W3D5_Project.view.LoginViewPort', {});",
                    "                        }",
                    "                        this.loginWindow.show();",
                    "                        this.loginWindow.unmask();",
                    "                    }",
                    "                }",
                    "            });",
                    "        }else{",
                    "            var i = v/11;",
                    "            Ext.MessageBox.updateProgress(i, Math.round(100*i)+'% completed');",
                    "        }",
                    "    };",
                    "};",
                    "for(var i = 1; i < 13; i++){",
                    "    setTimeout(f(i), i*500);",
                    "}",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onRegButtonClick",
            "designerId": "ea7454c2-fc11-4d5d-87b3-e4807774d644"
        }
    ]
}